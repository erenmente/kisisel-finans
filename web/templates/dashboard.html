{% extends "base.html" %}

{% block title %}Dashboard | Finans AsistanÄ±{% endblock %}

{% block content %}
<!-- Hero Section -->
<section class="hero">
    <div class="hero-content">
        <h1 class="hero-title">
            <span class="hero-greeting">HoÅŸ Geldin,</span>
            <span class="hero-name">Eren</span> ğŸ‘‹
        </h1>
        <p class="hero-subtitle">PortfÃ¶yÃ¼n ve piyasalar bir bakÄ±ÅŸta</p>
    </div>
    <div class="hero-stats">
        <div class="stat-card stat-primary">
            <div class="stat-icon">ğŸ’°</div>
            <div class="stat-info">
                <span class="stat-label">Toplam DeÄŸer</span>
                <span class="stat-value" id="totalValue">-</span>
            </div>
        </div>
        <div class="stat-card stat-success">
            <div class="stat-icon">ğŸ“ˆ</div>
            <div class="stat-info">
                <span class="stat-label">Aktif Pozisyon</span>
                <span class="stat-value" id="positionCount">-</span>
            </div>
        </div>
        <div class="stat-card stat-info">
            <div class="stat-icon">ğŸ¯</div>
            <div class="stat-info">
                <span class="stat-label">Ä°ÅŸlem SayÄ±sÄ±</span>
                <span class="stat-value" id="transactionCount">-</span>
            </div>
        </div>
    </div>
</section>

<!-- Portfolio Performance -->
<section class="section">
    <div class="section-header">
        <h2 class="section-title">ğŸ“Š PortfÃ¶y PerformansÄ±</h2>
        <button class="btn btn-glow btn-sm" id="refreshPerformance">
            <span>ğŸ”„</span> GÃ¼ncelle
        </button>
    </div>
    <div class="performance-grid">
        <div class="chart-card">
            <h3 class="chart-title">PortfÃ¶y DaÄŸÄ±lÄ±mÄ±</h3>
            <div class="chart-container">
                <canvas id="portfolioChart"></canvas>
            </div>
            <div class="chart-empty hidden" id="chartEmpty">
                <div class="empty-state-icon">ğŸ“Š</div>
                <div class="empty-state-text">HenÃ¼z yatÄ±rÄ±m yok</div>
            </div>
        </div>
        <div class="chart-card">
            <h3 class="chart-title">Kar / Zarar GrafiÄŸi</h3>
            <div class="chart-container">
                <canvas id="plChart"></canvas>
            </div>
            <div class="chart-empty hidden" id="plChartEmpty">
                <div class="empty-state-icon">ğŸ“ˆ</div>
                <div class="empty-state-text">Performans verisi yok</div>
            </div>
        </div>
    </div>
    <!-- Kar/Zarar Detay Listesi -->
    <div class="chart-card" style="margin-top: var(--space-md);">
        <h3 class="chart-title">Kar / Zarar DetaylarÄ±</h3>
        <div class="performance-summary" id="performanceSummary">
            <div class="perf-loading">
                <div class="loading-spinner"></div>
                <span>Fiyatlar yÃ¼kleniyor...</span>
            </div>
        </div>
    </div>
</section>

<!-- Quick Search -->
<section class="search-section">
    <div class="search-box">
        <input type="text" class="search-input" id="searchInput" placeholder="Sembol ara... (THYAO, USD, TTE, ALTIN)"
            autocomplete="off">
        <button class="search-btn" id="searchBtn">
            <span>ğŸ”</span>
        </button>
    </div>
    <div class="search-result" id="searchResult"></div>
</section>

<!-- Quick Overview -->
<section class="section">
    <div class="section-header">
        <h2 class="section-title">âš¡ HÄ±zlÄ± BakÄ±ÅŸ</h2>
        <a href="/market" class="btn btn-secondary">TÃ¼mÃ¼nÃ¼ GÃ¶r â†’</a>
    </div>
    <div class="market-grid" id="quickMarket">
        <div class="market-card skeleton">
            <div class="skeleton-text"></div>
        </div>
        <div class="market-card skeleton">
            <div class="skeleton-text"></div>
        </div>
        <div class="market-card skeleton">
            <div class="skeleton-text"></div>
        </div>
    </div>
</section>

<!-- Price Alerts -->
<section class="section">
    <div class="section-header">
        <h2 class="section-title">ğŸ”” Fiyat AlarmlarÄ±</h2>
        <button class="btn btn-primary btn-sm" id="addAlertBtn">
            <span>â•</span> Alarm Ekle
        </button>
    </div>
    <div class="alerts-list" id="alertsList">
        <div class="empty-state">
            <div class="empty-state-icon">ğŸ””</div>
            <div class="empty-state-text">HenÃ¼z alarm yok</div>
            <div class="empty-state-hint">"Alarm Ekle" butonuyla fiyat alarmÄ± oluÅŸtur</div>
        </div>
    </div>
</section>

<!-- Recent Transactions -->
<section class="section">
    <div class="section-header">
        <h2 class="section-title">ğŸ“œ Son Ä°ÅŸlemler</h2>
        <a href="/history" class="btn btn-secondary">TÃ¼mÃ¼nÃ¼ GÃ¶r â†’</a>
    </div>
    <div class="history-list" id="recentHistory">
        <div class="history-item skeleton">
            <div class="skeleton-text"></div>
        </div>
    </div>
</section>

<!-- Alert Modal -->
<div class="modal" id="alertModal">
    <div class="modal-backdrop"></div>
    <div class="modal-content">
        <div class="modal-header">
            <h3>ğŸ”” Yeni Fiyat AlarmÄ±</h3>
            <button class="modal-close" id="closeAlertModal">&times;</button>
        </div>
        <form id="alertForm">
            <div class="form-group">
                <label>Sembol</label>
                <input type="text" id="alertSymbol" placeholder="USD, THYAO, ALTIN..." required>
            </div>
            <div class="form-group">
                <label>KoÅŸul</label>
                <select id="alertCondition" class="filter-select alert-select" title="Alarm KoÅŸulu">
                    <option value="above">Fiyat Ã¼stÃ¼ne Ã§Ä±karsa â†‘</option>
                    <option value="below">Fiyat altÄ±na dÃ¼ÅŸerse â†“</option>
                </select>
            </div>
            <div class="form-group">
                <label>Hedef Fiyat (TL)</label>
                <input type="number" id="alertPrice" step="0.0001" placeholder="40.00" required>
            </div>
            <div class="form-actions">
                <button type="button" class="btn btn-secondary" id="cancelAlertModal">Ä°ptal</button>
                <button type="submit" class="btn btn-primary">Alarm OluÅŸtur</button>
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script src="/static/js/dashboard.js"></script>
{% endblock %}